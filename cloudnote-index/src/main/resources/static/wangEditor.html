<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://cdn.jsdelivr.net/npm/wangeditor@latest/dist/wangEditor.min.js"></script>
    <script src="/webjars/vue/2.5.16/dist/vue.min.js"></script>
    <script src="/webjars/axios/0.21.1/dist/axios.min.js"></script>
</head>
<body>
<form enctype="multipart/form-data" method="post">
<div id="div1" v-for="note in notes" v-if="note.notetitle=='ä»Šæ—¥å¿ƒæƒ…'">

    <p v-html="note.notebody"></p>


</div>
    <button type="submit" @click="huoqu"> è·å–</button>
</form>
</body>
<script type="text/javascript">
    const SINA_URL_PATH = 'http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal'
    const E = window.wangEditor
    const editor = new E('#div1')
    // æˆ–è€… const editor = new E( document.getElementById('div1') )
    editor.config.fontNames = [
        // å¯¹è±¡å½¢å¼ v4.6.16
        {name:"é»‘ä½“",value:"é»‘ä½“"},
        {name:"ç»ç»å­—ä½“",value:"Times New Roman"},
        // å­—ç¬¦ä¸²å½¢å¼
        'é»‘ä½“',
        'ä»¿å®‹',
        'æ¥·ä½“',
        'æ ‡æ¥·ä½“',
        'åæ–‡ä»¿å®‹',
        'åæ–‡æ¥·ä½“',
        'å®‹ä½“',
        'å¾®è½¯é›…é»‘',
        'Arial',
        'Tahoma',
        'Verdana',
        'Times New Roman',
        'Courier New'
    ]
    //è¡¨æƒ…é…ç½®
    editor.config.emotions = [
        {
            title: 'æ–°æµª', // tab çš„æ ‡é¢˜
            type: 'image', // 'emoji' æˆ– 'image' ï¼Œå³ emoji å½¢å¼æˆ–è€…å›¾ç‰‡å½¢å¼
            content: [
                { alt: '[åç¬‘]', src: `${SINA_URL_PATH}/50/pcmoren_huaixiao_org.png` },
                { alt: '[èˆ”å±]', src: `${SINA_URL_PATH}/40/pcmoren_tian_org.png` },
                { alt: '[æ±¡]', src: `${SINA_URL_PATH}/3c/pcmoren_wu_org.png` }
            ]
        },
        {
            title: 'emoji',  // tab çš„æ ‡é¢˜
            type: 'emoji', // 'emoji' / 'image'
            // emoji è¡¨æƒ…ï¼Œcontent æ˜¯ä¸€ä¸ªæ•°ç»„å³å¯
            content: 'ğŸ˜€ ğŸ˜ƒ ğŸ˜„ ğŸ˜ ğŸ˜† ğŸ˜… ğŸ˜‚ ğŸ˜Š ğŸ˜‡ ğŸ™‚ ğŸ™ƒ ğŸ˜‰ ğŸ˜“ ğŸ˜ª ğŸ˜´ ğŸ™„ ğŸ¤” ğŸ˜¬ ğŸ¤'.split(/\s/)
        }
    ]
    //
    editor.config.uploadImgServer = '/upload-img'
    // editor.config.uploadImgShowBase64 =true

    // æ’å…¥ç½‘ç»œå›¾ç‰‡çš„å›è°ƒ
    editor.config.linkImgCallback = function (src,alt,href) {

        console.log('å›¾ç‰‡ src ', src)
        console.log('å›¾ç‰‡æ–‡å­—è¯´æ˜',alt)
        console.log('è·³è½¬é“¾æ¥',href)
    }


    // é…ç½®alté€‰é¡¹
    editor.config.showLinkImgAlt = false
    // é…ç½®è¶…é“¾æ¥
    editor.config.showLinkImgHref = true

    editor.create()
    editor.txt.append('<p>è¿½åŠ çš„å†…å®¹</p>')
    console.log(editor.txt.text());
    // console.log(editor.txt.getJSON());
    // editor.config.onblur = function (newHtml) {
    //     console.log('onblur', newHtml) // è·å–æœ€æ–°çš„ html å†…å®¹
    // }
    editor.config.onfocus = function (newHtml) {
        console.log('onfocus', newHtml) // è·å–æœ€æ–°çš„ html å†…å®¹
    }
    // é…ç½® onchange å›è°ƒå‡½æ•°
    editor.config.onchange = function (newHtml) {
        console.log('change ä¹‹åæœ€æ–°çš„ html', newHtml)

    }
    // é…ç½®è§¦å‘ onchange çš„æ—¶é—´é¢‘ç‡ï¼Œé»˜è®¤ä¸º 200ms
    // editor.config.onchangeTimeout = 500 // ä¿®æ”¹ä¸º 500ms
    console.log(editor.txt.text());

    editor.config.uploadImgHooks = {
        // ä¸Šä¼ å›¾ç‰‡ä¹‹å‰
        before: function(xhr) {
            console.log(xhr)

            // å¯é˜»æ­¢å›¾ç‰‡ä¸Šä¼ 
            return {
                prevent: true,
                msg: 'éœ€è¦æç¤ºç»™ç”¨æˆ·çš„é”™è¯¯ä¿¡æ¯'
            }
        },
        // å›¾ç‰‡ä¸Šä¼ å¹¶è¿”å›äº†ç»“æœï¼Œå›¾ç‰‡æ’å…¥å·²æˆåŠŸ
        success: function(xhr) {
            console.log('success', xhr)
        },
        // å›¾ç‰‡ä¸Šä¼ å¹¶è¿”å›äº†ç»“æœï¼Œä½†å›¾ç‰‡æ’å…¥æ—¶å‡ºé”™äº†
        fail: function(xhr, editor, resData) {
            console.log('fail', resData)
        },
        // ä¸Šä¼ å›¾ç‰‡å‡ºé”™ï¼Œä¸€èˆ¬ä¸º http è¯·æ±‚çš„é”™è¯¯
        error: function(xhr, editor, resData) {
            console.log('error', xhr, resData)
        },
        // ä¸Šä¼ å›¾ç‰‡è¶…æ—¶
        timeout: function(xhr) {
            console.log('timeout')
        },
        // å›¾ç‰‡ä¸Šä¼ å¹¶è¿”å›äº†ç»“æœï¼Œæƒ³è¦è‡ªå·±æŠŠå›¾ç‰‡æ’å…¥åˆ°ç¼–è¾‘å™¨ä¸­
        // ä¾‹å¦‚æœåŠ¡å™¨ç«¯è¿”å›çš„ä¸æ˜¯ { errno: 0, data: [...] } è¿™ç§æ ¼å¼ï¼Œå¯ä½¿ç”¨ customInsert
        customInsert: function(insertImgFn, result) {
            // result å³æœåŠ¡ç«¯è¿”å›çš„æ¥å£
            console.log('customInsert', result)

            // insertImgFn å¯æŠŠå›¾ç‰‡æ’å…¥åˆ°ç¼–è¾‘å™¨ï¼Œä¼ å…¥å›¾ç‰‡ src ï¼Œæ‰§è¡Œå‡½æ•°å³å¯
            insertImgFn(result.data[0])
        }
    }
    
    // var v=new Vue({
    //     el:"#div1",
    //     data:{
    //         notename:""
    //     },
    //     methods:{
    //         huoqu:function () {
    //             console.log(editor.txt.text());
    //             console.log(this.notename);
    //         }
    //     }
    // })
</script>
<script>
    // let v=new Vue({
    //     el:"#div",
    //     data:{
    //         notes:[]
    //     },
    //     created(){
    //         axios.get("http://127.0.0.1/cloudnote-notebook/findAllNote").then(res=>{
    //             if(res.data.code=1){
    //                 this.notes=res.data.data;
    //             }
    //         })
    //
    //     }
    // })
</script>
</html>